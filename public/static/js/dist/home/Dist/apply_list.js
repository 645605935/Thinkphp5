$(function(){$(".j-pay-record").click(function(){var a=$(this),b=a.data("id"),c={time:a.data("time"),money:a.data("money"),account:a.data("account"),number:a.data("number"),name:a.data("name")},d=_.template($("#tpl_apply_list_pay_record").html(),c),e=$(d),f=e.find("input[name='running_number']"),g=e.find("input[name='trade_time']");return $.jBox.show({width:500,title:"提现支付登记",content:e,btnOK:{onBtnClick:function(a){$.jBox.close(a),$.ajax({url:"/Dist/pay_record",type:"post",dataType:"json",data:{log_id:b,running_number:f.val(),trade_time:g.val()},beforeSend:function(){$.jBox.showloading()},success:function(a){1==a.status?a.url?window.location.href=a.url:(HYD.hint("success",a.msg),setTimeout(function(){window.location.reload()},1e3)):HYD.hint("danger",a.msg),$.jBox.hideloading()}})}}}),!1}),$(".j-pay-audit").click(function(){var a=$(this),b=a.data("id"),c={time:a.data("time"),money:a.data("money"),account:a.data("account"),name:a.data("name")},d=_.template($("#tpl_apply_list_pay_audit").html(),c),e=$(d),f=e.find("input[name='money']");return $.jBox.show({width:500,title:"提现审核",content:e,btnOK:{onBtnClick:function(a){$.jBox.close(a),$.ajax({url:"/Dist/pay_audit",type:"post",dataType:"json",data:{log_id:b,money:f.val()},beforeSend:function(){$.jBox.showloading()},success:function(a){1==a.status?a.url?window.location.href=a.url:(HYD.hint("success",a.msg),setTimeout(function(){window.location.reload()},1e3)):HYD.hint("danger",a.msg),$.jBox.hideloading()}})}}}),!1}),$(".btn_table_auditAll").click(function(){var a=[],b=$(".table-ckbs:checked");return b.each(function(){a.push($(this).data("id"))}),a.length?($.jBox.show({title:"批量自动发放",content:_.template($("#tpl_jbox_simple").html(),{content:"确认发放吗？"}),btnOK:{onBtnClick:function(b){$.jBox.close(b),$.ajax({url:"/Dist/pay_record_all",type:"post",dataType:"json",data:{id:a},beforeSend:function(){$.jBox.showloading()},success:function(a){1==a.status?window.location.href=a.url:HYD.hint("danger","对不起，发放失败："+a.msg),$.jBox.hideloading()}})}}}),!1):void HYD.hint("warning","对不起，请选择要发放的数据！")}),$(".btn_one_auditAll").click(function(){var a=$(this),b={money:a.data("money"),num:a.data("num")},c=_.template($("#tpl_apply_list_pay_one").html(),b),d=$(c);return $.jBox.show({title:"一键自动发放",content:d,btnOK:{onBtnClick:function(a){var b=window.open("about:blank");$.jBox.close(a),$.ajax({url:"/Dist/pay_one_recordall",type:"post",dataType:"json",beforeSend:function(){$.jBox.showloading()},success:function(a){1==a.status?b.location.href=a.url:HYD.hint("danger",a.msg),$.jBox.hideloading()}})}}}),!1}),$(".btn_table_wx").click(function(){var a=[],b=$(".table-ckbs:checked");return b.each(function(){a.push($(this).data("id"))}),a.length?($.jBox.show({title:"批量自动发放",content:_.template($("#tpl_jbox_simple").html(),{content:"确认发放吗？"}),btnOK:{onBtnClick:function(b){$.jBox.close(b),$.ajax({url:"/Dist/wx_record_all",type:"post",dataType:"json",data:{id:a},beforeSend:function(){$.jBox.showloading()},success:function(a){1==a.status?HYD.hint("success",a.msg):HYD.hint("danger","对不起，发放失败："+a.msg),$.jBox.hideloading()}})}}}),!1):void HYD.hint("warning","对不起，请选择要发放的数据！")}),$(".btn_one_wx").click(function(){var a=$(this),b={money:a.data("money"),num:a.data("num")},c=_.template($("#tpl_apply_list_pay_one").html(),b),d=$(c);return $.jBox.show({title:"一键自动发放",content:d,btnOK:{onBtnClick:function(a){window.open("about:blank");$.jBox.close(a),$.ajax({url:"/Dist/wx_one_recordall",type:"post",dataType:"json",beforeSend:function(){$.jBox.showloading()},success:function(a){1==a.status?HYD.hint("success",a.msg):HYD.hint("danger",a.msg),$.jBox.hideloading()}})}}}),!1}),$(".J_export").click(function(){$(":hidden[name='action']").val("export")}),$(".j-reject").click(function(){var a=$(this).data("id"),b=$("#tpl_apply_list_reject").html(),c=$(b);$.jBox.show({width:500,title:"申请驳回",content:c,btnOK:{onBtnClick:function(b){$.jBox.close(b);var c=b.find('textarea[name="reason"]').val();$.ajax({url:"/Dist/apply_reject",type:"post",dataType:"json",data:{log_id:a,reason:c},beforeSend:function(){$.jBox.showloading()},success:function(a){1==a.status?(HYD.hint("success",a.msg),setTimeout(function(){window.location.reload()},1e3)):HYD.hint("danger",a.msg),$.jBox.hideloading()}})}}})})});