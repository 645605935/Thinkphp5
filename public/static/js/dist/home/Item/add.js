$(function(){$("#category1").change(function(){var a=$(this).val();$.post("/Item/ajax_category",{id:a},function(a){if(1==a.status){var b=$("#category2");$("option",b).remove(),$.each(a.data,function(a,c){var d="<option value='"+c.category_id+"'>"+c.title+"</option>";b.append(d)})}})});var a=$('input:radio[name="type"]:checked').val();2==a?$(".cat_1").hide():$(".cat_2").hide(),$("input:radio[name='type']").change(function(){var a=$(this).val();1==a?($(".cat_2").hide(),$(".cat_1").show()):2==a&&($(".cat_1").hide(),$(".cat_2").show())}),$(".J-first-cat").click(function(){"true"==$(this).parent("li").data("expanded")?($(this).parent("li").addClass("cc-tree-expanded"),$(this).parent("li").data("expanded","false")):($(this).parent("li").removeClass("cc-tree-expanded"),$(this).parent("li").data("expanded","true"))}),$(".J-catname").live("click",function(){$(this).parents("ul").find(".J-catname").removeClass("cc-selected"),$(this).addClass("cc-selected");var a="",b=$(this),c=$(this).data("cat_id")||0;$(this).hasClass("cc-hasChild-item")?$("#J-cat-id").val(0):$("#J-cat-id").val(c).change(),$(this).hasClass("cc-hasChild-item")||b.parents("li.cc-list-item").nextAll().remove(),$(".cc-selected").each(function(b){a+=0==b?"<li>"+$(this).html()+"</li>":"<li>&nbsp;&gt;&nbsp;"+$(this).html()+"</li>"}),$("#J_OlCatePath").html(a),$.ajax({type:"POST",url:"/Item/add",dataType:"json",data:{cat_id:c},success:function(a){if(a.length){var c="",d="";b.parents("li.cc-list-item").nextAll().remove();new Array;for(i=0;i<a.length;i++)d+='<li class="cc-cbox-group " role="treeitem"><div class="cc-cbox-gname">'+a[i].py+'</div>  <ul class="cc-cbox-gcont" role="group">       <li data-cat_id="'+a[i].sid+'" data-spell="'+a[i].spell+'"  class="J-catname cc-cbox-item '+(0==a[i].leaf?"cc-hasChild-item":"")+'">'+a[i].name+"</li>   </ul></li>";c+='<li class="cc-list-item J-all-list-item" tabindex="-1">  <div class="cc-cbox-filter">      <input type="text" autocomplete="off" class="J-input-search input-search" placeholder="输入名称/拼音首字母">  </div>  <div role="combobox" class="cc-cbox">      <ul role="listbox" tabindex="-1" hidefocus="-1" unselectable="on" class="cc-cbox-cont">'+d,b.parents("li.cc-list-item").after(c)}}})}),$(document).on("change keyup",".J-input-search",function(){var a=$(this).val(),b=new RegExp(a,"ig");$(this).parents("li.J-all-list-item").find(".cc-tree-group,.cc-cbox-group").hide(),$(this).parents("li.J-all-list-item").find(".J-catname").each(function(a){var c=$(this).html(),d=$(this).data("spell"),e=$(this).parents(".cc-tree-group,.cc-cbox-group");$(this).hide(),(d.match(b)||c.match(b))&&($(this).show(),e.show())})}),$("#J-cat-id").change(function(){$("#j-catID-helper").text("")}),$("#formAdd").submit(function(){var a=$("input[name='type']:checked").val(),b=!0;switch(console.log(a),a){case"1":var c=$("#category1"),d=$("#category2"),e=c.val(),f=d.val();-1==e&&(HYD.FormShowError(c,"请选择一级类目"),b=!1),-1==f&&(HYD.FormShowError(d,"请选择二级类目"),b=!1);break;case"2":var g=$("#J-cat-id").val();console.log(g),0==g&&($("#j-catID-helper").text("请选择完整的综合类目"),b=!1)}return b})});