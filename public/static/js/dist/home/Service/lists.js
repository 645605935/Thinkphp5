$(function(){$(".j-add").click(function(){$.jBox.show({width:500,title:"添加客服",content:_.template($("#tpl_userver_add").html()),btnOK:{onBtnClick:function(a){var b=a.find("input[name='nickname']"),c=a.find("input[name='userver']"),d=a.find("input[name='password']"),e=$.trim(b.val()),f=$.trim(c.val()),g=$.trim(d.val());return""==e?void HYD.FormShowError(b,"请输入客服昵称"):""==f?void HYD.FormShowError(c,"请输入登录手机号"):""==g?void HYD.FormShowError(d,"请输入密码"):($.jBox.close(a),void $.ajax({url:"/Service/addUserver",type:"post",dataType:"json",data:{nickname:e,userver:f,password:g},beforeSend:function(){$.jBox.showloading()},success:function(a){1==a.status?(HYD.hint("success","恭喜您，添加成功！"),setTimeout(function(){window.location.reload()},1e3)):HYD.hint("danger","对不起，添加失败："+a.msg),$.jBox.hideloading()}}))}}})}),$(".j-modify").click(function(){var a=$(this),b=a.data("id"),c={nickname:a.data("nickname"),userver:a.data("userver"),password:a.data("password")},d=_.template($("#tpl_userver_edit").html(),c),e=$(d),f=e.find("input[name='nickname']"),g=e.find("input[name='userver']"),h=e.find("input[name='password']");return $.jBox.show({width:500,title:"编辑客服",content:e,btnOK:{onBtnClick:function(a){$.jBox.close(a);var c=$.trim(f.val()),d=$.trim(g.val()),e=$.trim(h.val());$.ajax({url:"/Service/editUserver",type:"post",dataType:"json",data:{id:b,nickname:c,userver:d,password:e},beforeSend:function(){$.jBox.showloading()},success:function(a){1==a.status?(HYD.hint("success","恭喜您，编辑成功！"),setTimeout(function(){window.location.reload()},1e3)):HYD.hint("danger","对不起，编辑失败："+a.msg),$.jBox.hideloading()}})}}}),!1}),$(".j-del").click(function(){var a=$(this),b=a.data("id");return $.jBox.show({width:300,title:"删除客服",content:"确认要删除吗？",btnOK:{onBtnClick:function(a){$.jBox.close(a),$.ajax({url:"/Service/delUserver",type:"post",dataType:"json",data:{id:b},beforeSend:function(){$.jBox.showloading()},success:function(a){1==a.status?(HYD.hint("success","恭喜您，删除成功！"),setTimeout(function(){window.location.reload()},1e3)):HYD.hint("danger","对不起，删除失败："+a.msg),$.jBox.hideloading()}})}}}),!1})});